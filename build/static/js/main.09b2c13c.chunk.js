(this["webpackJsonpcrust-image-uploader"]=this["webpackJsonpcrust-image-uploader"]||[]).push([[0],{35:function(e,t,c){},37:function(e,t,c){},62:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c(0),i=c.n(o),r=c(15),s=c.n(r),a=(c(35),c(8)),l=c(3),j=c(18),b=c(9),u=c(26),h=c.n(u),d=Object({NODE_ENV:"production",PUBLIC_URL:"/crust-image-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEV_API_URL:"http://localhost:8080/",REACT_APP_PROD_API_URL:"https://crust-bikes-image-server.herokuapp.com/"}).REACT_APP_ENVIRONMENT&&"production"===Object({NODE_ENV:"production",PUBLIC_URL:"/crust-image-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEV_API_URL:"http://localhost:8080/",REACT_APP_PROD_API_URL:"https://crust-bikes-image-server.herokuapp.com/"}).REACT_APP_ENVIRONMENT?"https://crust-bikes-image-server.herokuapp.com/":"http://localhost:8080/",O=function(){var e=i.a.useState([]),t=Object(b.a)(e,2),c=t[0],o=t[1],r=i.a.useState(!1),s=Object(b.a)(r,2),a=(s[0],s[1]),l=function(){a(!0);var e=new FormData;c.forEach((function(t,c){var n=t.file;e.append(c,n),e.append("public_id","foo_bike_".concat(c))})),function(e){return fetch("".concat(d,"image-upload"),{method:"POST",body:e}).then((function(e){return e.json()}))}(e).then((function(e){a(!1),o(e)}))};return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(h.a,{multiple:!0,value:c,onChange:function(e,t){console.log(e,t),o(e)},maxNumber:10,dataURLKey:"data_url",children:function(e){var t=e.imageList,c=e.onImageUpload,o=e.onImageRemoveAll,i=e.onImageUpdate,r=e.onImageRemove,s=e.isDragging,a=e.dragProps;return Object(n.jsxs)("div",{className:"upload__image-wrapper",children:[Object(n.jsx)("button",Object(j.a)(Object(j.a)({style:s?{color:"red"}:null,onClick:c},a),{},{children:"Click or Drop here"})),"\xa0",Object(n.jsx)("button",{onClick:o,children:"Remove all images"}),Object(n.jsx)("button",{onClick:l,children:"Submit"}),t.map((function(e,t){return Object(n.jsxs)("div",{className:"image-item",children:[Object(n.jsx)("img",{src:e.data_url,alt:"",width:"100"}),Object(n.jsxs)("div",{className:"image-item__btn-wrapper",children:[Object(n.jsx)("button",{onClick:function(){return i(t)},children:"Update"}),Object(n.jsx)("button",{onClick:function(){return r(t)},children:"Remove"})]})]},t)}))]})}})})},p=(c(37),c(27)),_=c.n(p),m=c(28),x=c.n(m),g={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},v=function(e){var t,c=e.showBike,o=e.photos,r=e.setActive,s=e.bikeID,a=e.bikeModel,l=i.a.useState(!1),j=Object(b.a)(l,2),u=j[0],h=j[1],d=function(){h(!1),r(0)};return console.log({bikeID:s,showBike:c,showModal:s===c}),s===c?Object(n.jsx)("div",{children:o.length>0&&Object(n.jsxs)(x.a,{isOpen:u,onAfterOpen:function(){t.style.color="#f00"},onRequestClose:d,style:g,contentLabel:"Gallery Modal",children:[Object(n.jsx)("h2",{ref:function(e){return t=e},children:a}),Object(n.jsx)("button",{onClick:d,children:"Close"}),Object(n.jsx)(_.a,{items:o})]})}):Object(n.jsx)("img",{onClick:function(){0!==o.length&&(h(!0),r(s))},alt:"placeholder",src:o.length>0&&o[0].thumbnail?o[0].thumbnail:"https://via.placeholder.com/400x200.png?text=Placeholder"})},f=function(){var e=Object(l.f)().bikeModel,t=Object(o.useState)([]),c=Object(b.a)(t,2),i=c[0],r=c[1],s=Object(o.useState)(0),a=Object(b.a)(s,2),j=a[0],u=a[1];return Object(o.useEffect)((function(){var t=!0;return function(e){return fetch("".concat(d,"bikes/").concat(e),{method:"GET"}).then((function(e){return e.json()}))}(e).then((function(e){console.log("bikes",e),t&&r(e)})),function(){return t=!1}}),[e]),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{children:["Requested bike model: ",e]}),i.map((function(t,c){var o=t.photos,i=t.bikeID;return Object(n.jsx)(v,{bikeID:i,showBike:j,setActive:u,bikeModel:e,photos:o},i)}))]})},E=function(){var e=Object(l.g)();return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Bikes"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(a.b,{to:"".concat(e.url,"/evasion"),children:"Evasion"})}),Object(n.jsx)("li",{children:Object(n.jsx)(a.b,{to:"".concat(e.url,"/lightningbolt"),children:"Lightning Bolt"})})]}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"".concat(e.path,"/:bikeModel"),children:Object(n.jsx)(f,{})}),Object(n.jsx)(l.a,{path:e.path,children:Object(n.jsx)("h3",{children:"Please select a bike model."})})]})]})};c(59).config(),console.log("process.env",{env:Object({NODE_ENV:"production",PUBLIC_URL:"/crust-image-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEV_API_URL:"http://localhost:8080/",REACT_APP_PROD_API_URL:"https://crust-bikes-image-server.herokuapp.com/"})});var P=function(){return Object(n.jsx)(a.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(a.b,{to:"/Upload",children:"Upload"})}),Object(n.jsx)("li",{children:Object(n.jsx)(a.b,{to:"/bikes",children:"Bikes"})})]})}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/upload",children:Object(n.jsx)(O,{})}),Object(n.jsx)(l.a,{path:"/bikes",children:Object(n.jsx)(E,{})})]})]})})},R=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,63)).then((function(t){var c=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),o(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(P,{})}),document.getElementById("root")),R()}},[[62,1,2]]]);
//# sourceMappingURL=main.09b2c13c.chunk.js.map